(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"5d84":function(t,e,a){},8695:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{ref:"mm",staticClass:"bg-white",attrs:{id:"mm"}},[t.isCustomListEditing?t._e():a("q-table",{ref:"table",attrs:{flat:"",dense:"",id:"gu-masterlist","binary-state-sort":"",square:"","virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0],"hide-pagination":"","hide-no-data":t.hideNodata,"virtual-scroll-sticky-size-start":42,data:t.myFavorites,columns:t.columns,loading:t.IsLoading,"row-key":"symbol"},on:{"update:pagination":function(e){t.pagination=e},"row-click":t.clicked},scopedSlots:t._u([{key:"header",fn:function(e){return[a("q-tr",{staticStyle:{height:"42px"},attrs:{props:e}},t._l(e.cols,(function(s){return a("q-th",{key:s.name,staticClass:"text-blueGrey text-bold text-center",staticStyle:{"font-weight":"bold","font-size":"14px"},attrs:{id:t.$store.state.global.gaHead+"mylist_sort_"+s.name,"auto-width":"",props:e}},[t._v("\n          "+t._s(s.label)+"\n        ")])})),1)]}},{key:"body-cell-symbol",fn:function(e){var s=e.props,i=e.row;return[a("q-td",{staticClass:"text-main text-bold ",attrs:{props:s,row:i}},[a("div",{staticClass:"text-main text-bold"},[t._v(t._s(i.symbol))]),a("div",{staticClass:"text-caption text-blueGrey"},[t._v("\n          "+t._s(t.adjString("zh-hant"==t.$i18n.locale&&i.name_cn?i.name_cn:i.name,4))+"\n        ")])])]}},{key:"body-cell-price",fn:function(e){var s=e.props,i=e.row;return[a("q-td",{class:["text-right","text-bold",i.price_change>0?"text-positive":"text-negative"],attrs:{props:s,row:i}},[a("div",[t._v(t._s(i.price))]),a("div",{staticClass:"row justify-end items-center",staticStyle:{"font-size":"10px"}},[a("q-icon",{staticClass:"q-pr-sm",attrs:{name:i.price_change>0?"fas fa-caret-up":"fas fa-caret-down"}}),a("div",[t._v("\n            "+t._s(Math.abs(i.price_change_percent))+"%\n            ")])],1)])]}},{key:"body-cell-fair_value",fn:function(e){var s=e.props,i=e.row;return[a("q-td",{class:["text-right","text-main",i.fair_value>i.price?"text-positive":"text-negative"],attrs:{props:s,row:i}},[a("div",{staticClass:"text-bold"},[t._v(t._s(i.fair_value))]),a("div",{staticStyle:{"font-size":"10px"}},[t._v("\n          "+t._s(i.fair_value>i.price?t.$t("stock.masterList.fair_value_over",[i.fair_value_desc]):t.$t("stock.masterList.fair_value_less",[i.fair_value_desc]))+"\n        ")])])]}},{key:"body-cell-quality_score",fn:function(e){return[a("q-td",{staticClass:"text-main text-bold text-center ",attrs:{props:e}},[t._v("\n        "+t._s(e.value)+"\n      ")])]}},{key:"no-data",fn:function(){return[a("h5",[t._v("\n        目前沒有任何自選股\n      ")])]},proxy:!0}],null,!1,1429937579)}),t.isCustomListEditing?a("q-list",{attrs:{separator:""}},[a("draggable",{on:{end:t.onEnd},model:{value:t.orderList,callback:function(e){t.orderList=e},expression:"orderList"}},t._l(t.orderList,(function(e,s){return a("q-item",{key:s,attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{id:t.$store.state.global.gaHead+"mylist_edit_delete",icon:"remove_circle","text-color":"removebtn",unelevated:"",round:"",ripple:!1},on:{click:function(a){return t.remove(e)}}})],1),a("q-item-section",{staticClass:"text-main text-bold text-subtitle"},[t._v("\n          "+t._s(e))]),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{icon:"drag_handle",flat:"",round:"",ripple:!1}})],1)],1)})),1)],1):t._e(),a("q-inner-loading",{staticClass:"text-main ",attrs:{showing:t.IsLoading,"transition-show":"fade","transition-hide":"fade"}},[a("div",{staticClass:"text-h6 text-blueGrey text-bold q-pb-md"},[t._v("資料讀取中")]),a("q-spinner-gears",{attrs:{size:"45px",color:t.gearColor}})],1)],1)},i=[],r=a("872c"),o=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("4917"),a("9523")),n=a.n(o),l=a("2f62"),c=a("0831");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){n()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f=c["a"].getScrollTarget,b=c["a"].getScrollPosition,p=c["a"].setScrollPosition,m={beforeRouteLeave:function(t,e,a){this.$store.state.global.isCustomListEditing||a()},mounted:function(){var t=this;this.title="自選股清單",this.$q.iconSet.table.arrowUp="fas fa-caret-up";var e=this.$store.state.global.screen.height;this.$store.commit("global/editClicked",(function(e,a){e?(t.orderList=[],t.myFavorites.forEach((function(e){t.orderList.push(e.symbol)}))):(t.IsLoading=!0,t.UpdateFavoritesSymbolList({data:t.orderList,finally:function(e){t.loadData()}}))})),setTimeout((function(){var a=t.$root.$children[0].$children[0].$refs.header.$el.clientHeight,s=t.$root.$children[0].$children[0].$refs.footer.$el.clientHeight;t.$refs.table.$el.style.height=e-a-s-1+"px",t.lastScrollPos&&setTimeout((function(){console.log("to=>%s",t.lastScrollPos);f(t.$refs.table.$refs.virtScroll.$el);p(t.$refs.table.$refs.virtScroll.$el,t.lastScrollPos),t.setLastScrollPos(0)}),200)}),100),this.loadData()},computed:u(u({},Object(l["c"])("stock",["myFavorites","favoritesSymbolList","lastScrollPos","needReloadFavoriteList"])),Object(l["c"])("global",["isCustomListEditing"])),data:function(){return{IsLoading:!1,hideNodata:!0,pagination:{rowsPerPage:0},columns:[{name:"symbol",required:!0,label:"股票",align:"left",field:"symbol",sortable:!0},{name:"price",required:!0,label:"股票市價",align:"right",field:"price",sortable:!0},{name:"fair_value",required:!0,label:"合理價值",align:"right",field:"fair_value",sortable:!0},{name:"quality_score",required:!0,label:"品質分數",align:"center",field:"quality_score",sortable:!0}],orderList:[]}},methods:u(u(u({},Object(l["d"])("stock",["setFavoritesSymbolList","setLastScrollPos"])),Object(l["b"])("stock",["getMyFavorites","RefreshFavoritesSymbolList","UpdateFavoritesSymbolList"])),{},{adjString:function(t,e){var a=/[\u4e00-\u9fa5]/g,s=t.substring(0,e),i=~~(s.match(a)&&s.match(a).length),r=2*s.length-i;return t.substr(0,r)+(r<t.length?"...":"")},loadData:function(){var t=this;this.hideNodata=!0,this.IsLoading=!0,this.getMyFavorites({success:function(e){console.log(e);var a=e.data;0===a.result&&(null==a.data?t.hideNodata=!1:(t.RefreshFavoritesSymbolList(),t.orderList=[],a.data.symbols.forEach((function(e){t.orderList.push(e.symbol)}))))},finally:function(){t.IsLoading=!1}})},onEnd:function(t){t.oldIndex!=t.newIndex&&this.setFavoritesSymbolList(this.orderList)},remove:function(t){var e=this.orderList.indexOf(t);e>=0&&(this.orderList.splice(e,1),this.setFavoritesSymbolList(this.orderList))},clicked:function(t,e){var a=f(this.$refs.table.$refs.virtScroll.$el),s=b(a);this.setLastScrollPos(s),this.$router.push({path:"/stock/detail/".concat(e.symbol)})}})},g=a("310e"),h=a.n(g),v={mixins:[r["a"],m],components:{draggable:h.a}},y=v,_=(a("9a89"),a("2877")),x=a("9989"),L=a("eaac"),S=a("bd08"),$=a("357e"),w=a("db86"),q=a("0016"),k=a("1c1c"),O=a("66e5"),P=a("4074"),j=a("9c40"),C=a("74f7"),F=a("cf57"),I=a("eebe"),Q=a.n(I),E=Object(_["a"])(y,s,i,!1,null,null,null);e["default"]=E.exports;Q()(E,"components",{QPage:x["a"],QTable:L["a"],QTr:S["a"],QTh:$["a"],QTd:w["a"],QIcon:q["a"],QList:k["a"],QItem:O["a"],QItemSection:P["a"],QBtn:j["a"],QInnerLoading:C["a"],QSpinnerGears:F["a"]})},"9a89":function(t,e,a){"use strict";var s=a("5d84"),i=a.n(s);i.a}}]);