(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{7454:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"bg-background-light"},[a("div",{staticStyle:{"padding-bottom":"56px"}},[a("q-infinite-scroll",{ref:"forum",attrs:{offset:250,"initial-index":"0"},on:{load:t.onLoad},scopedSlots:t._u([{key:"loading",fn:function(){return[a("div",{staticClass:"full-width text-center q-pa-md "},[a("q-spinner-ios",{attrs:{size:"30px",color:"bluegrey"}})],1)]},proxy:!0}])},t._l(t.dataList,(function(e,o){return a("q-card",{key:o,staticClass:" q-py-sm ",staticStyle:{"margin-bottom":"6px"},attrs:{flat:"",square:""}},[a("q-item",{staticClass:"q-pb-none"},[a("q-item-section",{staticStyle:{"min-width":"38px","padding-right":"12px"},attrs:{avatar:""}},[a("q-avatar",{attrs:{size:"38px"}},[a("img",{attrs:{src:e.author_head}})])],1),a("q-item-section",{attrs:{"no-wrap":""}},[a("q-item-label",{staticClass:"text-color-1 text-bold text-subtitle1"},[t._v(t._s(e.author_name))]),a("q-item-label",{staticClass:"text-color-2",attrs:{caption:""}},[t._v(t._s(e.time_before))])],1),a("q-item-section",{attrs:{side:"",top:""}},[e.author!=t.$store.state.account.id?a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"more_vert"},on:{click:function(a){return t.block(e,o)}}}):t._e()],1)],1),a("q-card-section",{attrs:{horizontal:""}},[a("q-card-section",{staticClass:"text-color-2"},[t._v("\n            "+t._s(e.content)+"\n          ")])],1),a("q-item",{staticClass:"q-py-none",attrs:{dense:""}},[a("q-item-section",[a("q-item-label",[a("q-btn",{attrs:{dense:"",flat:"",align:"left",icon:e.my_like?"favorite":"favorite_border",label:e.likes_count,"text-color":e.my_like?"redheart":"text-color-2"},on:{click:function(a){return t.like(e,!e.my_like)}}})],1)],1),a("q-item-section",[a("q-item-label",[a("q-btn",{attrs:{dense:"",flat:"",to:"/community/feeds-reply/"+t.forumId+"/"+e.uid,align:"left",icon:"far fa-comment",label:e.reply_count,"text-color":"text-color-2"}})],1)],1)],1)],1)})),1)],1),a("q-footer",{attrs:{id:"footer"}},[a("div",{staticClass:"bg-feeds-messagebg row bg-feeds-messagebg q-col-gutter-sm items-center q-pb-sm q-pl-sm q-pr-sm ",attrs:{id:"community-sendBox"}},[a("div",{staticClass:"col-auto "},[a("q-avatar",{attrs:{size:"33px"}},[a("img",{attrs:{src:t.$store.state.account.head}})])],1),a("div",{staticClass:"col full-width"},[a("q-input",{staticClass:"bg-white",attrs:{dense:"",clearable:"",color:"blueGrey",autogrow:"",outlined:"",placeholder:"以"+t.$store.state.account.user.account+" 發表回應"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),a("div",{staticClass:"col-auto"},[a("q-btn",{attrs:{dense:"",round:"",flat:"",icon:"send",disable:!t.message,color:"blueGrey"},on:{click:t.postComment}})],1)])]),a("q-inner-loading",{staticClass:"text-main ",attrs:{showing:t.isLoading,"transition-show":"fade","transition-hide":"fade"}},[a("div",{staticClass:"text-h6 text-blueGrey text-bold q-pb-md"},[t._v("讀取中")]),a("q-spinner-gears",{attrs:{size:"45px",color:t.gearColor}})],1)],1)},i=[],n=a("872c"),s={mixins:[n["a"]],beforeMount:function(){this.title="美股雙效成長投資術 VIP 群"},mounted:function(){this.forumId=this.$route.params.forumId,this.dataList=[]},data:function(){return{forumId:"1",isLoading:!1,message:"",dataList:[]}},methods:{init:function(){this.dataList=[],this.$refs.forum.reset(),this.$refs.forum.poll()},onLoad:function(t,e){var a=this;this.$api.forum.ForumList(this.forumId,t-1).then((function(t){var o=t.data;console.log(o),0==o.data.length?e(!0):e(),a.dataList=a.$_.concat(a.dataList,o.data)})).catch((function(t){})).then((function(){0}))},postComment:function(){var t=this;this.isLoading=!0,this.$api.forum.ForumPost(this.message,this.forumId).then((function(e){var a={author:t.$store.state.account.id,author_head:t.$store.state.account.head,author_name:t.$store.state.account.user.account,content:t.message,forum_id:t.forumId,likes_count:0,my_like:!1,reply:[],reply_count:0,time:"",time_before:"剛才",uid:e.data.data.new_id};t.dataList.splice(0,0,a),t.message=""})).catch((function(t){})).then((function(){t.isLoading=!1}))},like:function(t,e){this.$api.forum.ForumLike(t.uid,e,this.forumId).then((function(a){t.my_like=e,e?t.likes_count++:t.likes_count--}))},block:function(t,e){var a=this,o=this.$q.bottomSheet({class:"sheet-actions",actions:[{label:"封鎖使用者",id:"user"},{label:"隱藏此貼文",id:"hide"},{label:"檢舉此貼文",id:"report"},{label:"取消",id:"cancel"}]}).onOk((function(i){a.blockAction(i,o,t,e)})).onCancel((function(){})).onDismiss((function(){}))},blockAction:function(t,e,a,o){var i=this;switch(t.id){case"cancel":e.hide();break;case"hide":this.$api.forum.ForumHide(a.uid,this.forumId).then((function(t){var e=0==t.data.result?"此文章已過濾":t.data.message;i.$q.notify({message:e}),i.dataList.splice(o,1)})).catch((function(t){})).then((function(){}));break;case"user":this.$api.forum.ForumReport(a.uid,"3",this.forumId).then((function(t){var e=0==t.data.result?"已封鎖使用者 - <".concat(a.author_name,">"):t.data.message;i.$q.notify({message:e});i.$_.remove(i.dataList,(function(t){return t.author==a.author}));i.dataList.splice(0,0)})).catch((function(t){})).then((function(){}));break;case"report":this.reportContent(a.uid,o);break}},reportContent:function(t,e){var a=this;this.$q.bottomSheet({class:"sheet-report",message:"請選擇您檢舉的理由",actions:[{label:"這是垃圾訊息",id:"hide",rpt_type:"1"},{label:"內容不適當",id:"report",rpt_type:"2"}]}).onOk((function(o){a.$api.forum.ForumReport(t,o.rpt_type,a.forumId).then((function(t){var o=0==t.data.result?"此文章已過濾":t.data.message;a.$q.notify({message:o}),a.dataList.splice(e,1)})).catch((function(t){})).then((function(){}))})).onCancel((function(){})).onDismiss((function(){}))}}},r=s,c=a("2877"),l=a("9989"),u=a("ef35"),d=a("d9b2"),f=a("f09f"),m=a("66e5"),h=a("4074"),p=a("cb32"),b=a("0170"),g=a("9c40"),q=a("a370"),y=a("7ff0"),_=a("27f9"),v=a("74f7"),k=a("cf57"),x=a("eebe"),C=a.n(x),w=Object(c["a"])(r,o,i,!1,null,null,null);e["default"]=w.exports;C()(w,"components",{QPage:l["a"],QInfiniteScroll:u["a"],QSpinnerIos:d["a"],QCard:f["a"],QItem:m["a"],QItemSection:h["a"],QAvatar:p["a"],QItemLabel:b["a"],QBtn:g["a"],QCardSection:q["a"],QFooter:y["a"],QInput:_["a"],QInnerLoading:v["a"],QSpinnerGears:k["a"]})},"872c":function(t,e,a){"use strict";a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d");var o=a("9523"),i=a.n(o),n=a("2f62");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){i()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e["a"]={mounted:function(){this.updateTitle(this.title)},data:function(){return{title:"",gearColor:"sunYellow"}},methods:r({},Object(n["b"])("system",["updateTitle"]))}}}]);